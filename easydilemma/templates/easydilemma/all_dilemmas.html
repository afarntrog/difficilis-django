<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ToDo App</title>
    {% load static %}

    <link href="https://fonts.googleapis.com/css?family=Oswald" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <!--My css sheet-->
    <link rel="stylesheet" href="../../static/easydilemma/css/main.css">
    <!--Font Awesome-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <!--jQuery CDN-->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous">
    </script>

    <!--jQuery UI local link-->
    <script src="../../static/easydilemma/jquery-ui-1.12.1/jquery-ui.min.js"></script>
    <!--Loading overlay Libary-->
    <!-- <script src="./jquery-loading-overlay-2.1.6/src/loadingoverlay.js"></script> -->
    <script src="../../static/easydilemma/js/main2.js" ></script>
    <script src="../../static/easydilemma/js/ajax_dilemmas.js" ></script>
<script>
    $(document).ready(function() {
        // Create a new html card elemnet to append to page. [Card Part 1]
        // var complete_html_card = '<div class="container mb-5"><div class="card w-75 mx-auto">'

    //     // GET ALL THE STUFF PARSE THEM AND THEN LOOP THROUGH THEM.
    //     var dilemma_count = parseInt( localStorage.dilemma_count );


    //     for (var i = 1; i <= dilemma_count; i++) {

    //         // Create a new html card elemnet to append to page. [Card Part 1]
    //         var complete_html_card = '<div class="container mb-5"><div class="card w-75 mx-auto">'

    //         // GET THE DILEMMA;
    //         // NOTE: this is set on the reason page. This way it is always updated. I can just ue this instead of forms. But no practice if do that.
    //         var dilemma_storage_string = localStorage.getItem("dilemma" + i);

    //         var dilemma_header = dilemma_storage_string.replace("*", " or ");

    //         // Add the dilemma header to the html card element. [Card Part 2]
    //         complete_html_card += '<div class="card-header"><h5>Dilemma: <span id="reason-card-header">'+ dilemma_header + '</span></h5></div>';

    //         // Add card body html [Card part 3]
    //         complete_html_card += '<div class="card-body" id="reason-card-body">';
            
    //         // FIRST FORM
    //         // Get all the reasons and importance for the dilemma
    //         // Initilaize card to be used in the html body.
    //         var storage_string = localStorage.getItem("form_1_dilemma_reasons" + i);
    //         var cleaned_form_1_reasons = storage_string.slice(0, -1).split("|");
    //         var html_card = "";
    //         for (var index = 0; index < cleaned_form_1_reasons.length; index++) {
    //             var reason_and_importance = cleaned_form_1_reasons[index].split("*");
    //             var reason =  reason_and_importance[0];
    //             var importance = reason_and_importance[1];
    //             html_card = '<div class="row mb-3"><div class="col-md-8"><input type="text" class="form-control font-weight-bold expand-reason text-truncate" value=' 
    //                     + '"' + reason + '" ' + ' readonly>' + '<div class="p-2 mb-3 rounded text-dark font-weight-bold border text-center bg-light" style="display: none" id="full-reason-div">' + reason + '</div>';
    //             var second_part = '</div><div class="col-md-4"><input type="text" class="form-control text-center font-weight-bold" value=' + "'" + importance + "' " +'placeholder="*" readonly></div></div>';
    //             var whole_element = html_card + second_part;

    //             // Append the body/reasons of form_1 to the card element [Card Part 3]
    //             complete_html_card += whole_element;
    //             // $("#reason-card-body").append(whole_element);

    //     }
        
        
    //     // SECOND FORM
    //     var storage_string = localStorage.getItem("form_2_dilemma_reasons" + i);
    //     var cleaned_form_2_reasons = storage_string.slice(0, -1).split("|");

    //     // Step through the array. Split the reason and importance for each one
    //     html_card = "";
    //     for (var index = 0; index < cleaned_form_2_reasons.length; index++) {
    //         var reason_and_importance = cleaned_form_2_reasons[index].split("*");
    //         var reason =  reason_and_importance[0];
    //         var importance = reason_and_importance[1];
    //         html_card = '<div class="row mb-3"><div class="col-md-8"><input type="text" class="form-control font-weight-bold expand-reason text-truncate" value=' 
    //                 + '"' + reason + '" ' + ' readonly>' + '<div class="p-2 mb-3 rounded text-dark font-weight-bold border text-center bg-light" style="display: none" id="full-reason-div">' + reason +  '</div>';
    //         var second_part = '</div><div class="col-md-4"><input type="text" class="form-control text-center font-weight-bold" value=' + "'" + importance + "' " +'placeholder="*" readonly></div></div>';
    //         var whole_element = html_card + second_part;
    //         // Append the body/reasons of form_1 to the card element [Card Part 4]
    //         complete_html_card += whole_element;
    //         // $("#reason-card-body").append(whole_element);
    //     }

    //     // Get the result from storage and store it in the card footer.
    //     var result_string = localStorage.getItem("result" + i);
    //     // Append the body/reasons of form_1 to the card element [Card Part 5]
    //     var card_footer = '</div><div class="card-footer"><h5 class="font-weight-bold">Result: <span id="reason-card-footer">' + result_string + '</span> </h5></div></div></div>';

    //     complete_html_card += card_footer;

    //     // Add the entire new card to the page
    //     $("#add-content").prepend( complete_html_card );
        
    // } // END FOR loop

    // Add toggle abibilty to the reasons table
    // When user clicks the text box a new field will display showing the entire reason un-truncated.
    // MUST bind function to dynamically added content
    $("body").on("click", ".expand-reason",function() {
        $(this).next().toggle();
    });

    }); // END READY function.
    
</script>
</head>


<!--Make it inherit the first page navbar-->

<body>
    <header class="header">
        <!-- Navbar-->
        <nav class="navbar navbar-expand-lg fixed-top shadow navbar-light bg-white">
            <div class="d-flex">
                <a class="navbar-brand grow" href="{% url 'easydilemma:index' %}" id="logo"><img src="{% static '../static/easydilemma/images/question.png' %}" id="logo" alt="Question mark"></a>
                <!--<a href="index.html" class="navbar-brand text-uppercase font-weight-bold"><span>Difficilis</span></a>-->
            </div>
            
            <button type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation"  class="navbar-toggler navbar-toggler-right">
                <i class="fa fa-bars"></i>
            </button>

            <div class="collapse navbar-collapse" id="navbarCollapse">
                <!--Left side of NavBar-->
                <ul class="navbar-nav">
                <li class="nav-item" ><a  href="{% url 'easydilemma:index' %}" class="nav-link font-weight-bold">Home</a></li>
                <li class="nav-item "><a  href="{% url 'easydilemma:all_dilemmas' %}" class="nav-link font-weight-bold">Popular</a></li>
                <li class="nav-item"><a  href="{% url 'easydilemma:all_dilemmas' %}" class="nav-link font-weight-bold">Newest</a></li>
                <li class="nav-item"><a  href="{% url 'easydilemma:all_dilemmas' %}" class="nav-link font-weight-bold">All Dilemmas</a></li>

                </ul>
                <!--Right side of NavBar-->
                <ul class="navbar-nav ml-auto">
                <li class="nav-item ml-lg-3 "><button class="btn btn-outline-primary navbar_btn" id="login-overlay-button" data-toggle="modal" data-target="#login-modal"><strong>LOG IN</strong></button></li>
                <li class="nav-item ml-lg-3 "><button class="btn btn-primary navbar_btn" data-toggle="modal" data-target="#signup-modal"><strong>SIGN UP</strong></button></li>
                </ul>

            </div>
        </nav>
        <!-- /Navbar -->
        </header>

        <!--The finnished dilemma card will go here-->
        <div id="add-content">                   
                

        </div>




        <!--Results content card This is the template for the finnished dilemma card used in the JS.-->
        <!--
        <div class="container mb-5">
            <div class="card w-75 mx-auto">
                <div class="card-header">-->
                    <!-- Store the reason title that was pulled with JS from the url which is from the form-->
                    <!--<h5>Dilemma: <span id="reason-card-header"> </span></h5>
                </div> 
                <div class="card-body" id="reason-card-body">
                </div>
           
            <div class="card-footer">
                <h5 class="font-weight-bold">Result: <span id="reason-card-footer"> </span> </h5>
            </div>
        </div>
    </div>-->



    <!-- <script>
            $(document).ready(function() {
                $(".expand-reason").on("click", function() {
                    $(this).next().toggle();
                });
        
            });
        </script> -->
        
{% for dilemma in all_dilemmas %}
<!--TOGGLE CLASS-->
<div class="container mb-5">
        <div class="card w-75 mx-auto">
            <div class="card-header">
                <h5>{{ dilemma.dilemma_part_one.dilemma_part_one }} or {{ dilemma.dilemma_part_two.dilemma_part_two }}</h5>
            </div> 
            <div class="card-body">
                {% for reason in dilemma.dilemma_part_one.reason_part_one.all %}
                <div class="row mb-3">
                    <div class="col-md-8">
                        <input type="text" class="form-control font-weight-bold expand-reason text-truncate" value="{{ reason.reason }}" readonly>
                        <div class="p-2 mb-3 rounded text-dark font-weight-bold border text-center bg-light" style="display: none" id="full-reason-div">{{ reason.reason }}</div>
                    </div>
                    <div class="col-md-4">
                            {% if reason.selected_option == "1" %}
                                <input type="text" class="form-control text-center font-weight-bold" value="Not Really Important" readonly>
                            {% elif reason.selected_option == "2" %}
                                <input type="text" class="form-control text-center font-weight-bold" value="Somewhat Important" readonly>
                            {% elif reason.selected_option == "3" %}
                                <input type="text" class="form-control text-center font-weight-bold" value="Important" readonly>
                            {% elif reason.selected_option == "4" %}
                                <input type="text" class="form-control text-center font-weight-bold" value="Very Important" readonly>
                            {% elif reason.selected_option == "5" %}
                                <input type="text" class="form-control text-center font-weight-bold" value="Extremely Important" readonly>
                            {% endif %}
                    </div>
                </div>
                {% endfor %}

                {% for reason in dilemma.dilemma_part_two.reason_part_two.all %}
                <div class="row mb-3">
                    <div class="col-md-8">
                        <input type="text" class="form-control font-weight-bold expand-reason text-truncate" value="{{ reason.reason }}" readonly>
                        <div class="p-2 mb-3 rounded text-dark font-weight-bold border text-center bg-light" style="display: none" id="full-reason-div">{{ reason.reason }}</div>
                    </div>
                    <div class="col-md-4">
                            {% if reason.selected_option == "1" %}
                                <input type="text" class="form-control text-center font-weight-bold" value="Not Really Important" readonly>
                            {% elif reason.selected_option == "2" %}
                                <input type="text" class="form-control text-center font-weight-bold" value="Somewhat Important" readonly>
                            {% elif reason.selected_option == "3" %}
                                <input type="text" class="form-control text-center font-weight-bold" value="Important" readonly>
                            {% elif reason.selected_option == "4" %}
                                <input type="text" class="form-control text-center font-weight-bold" value="Very Important" readonly>
                            {% elif reason.selected_option == "5" %}
                                <input type="text" class="form-control text-center font-weight-bold" value="Extremely Important" readonly>
                            {% endif %}                        
                    </div>
                </div>
                {% endfor %}
              <!--<div class="row mb-3">
                    <div class="col-md-8">
                        <input type="text" class="form-control font-weight-bold  expand-reason text-truncate" value="hreohfohsdo" readonly>
                        <div class="p-2 mb-3 rounded text-dark font-weight-bold border text-center bg-light" style="display: none" id="full-reason-div">Javascript first because jQuery ismmmmmmmmmmmmmmmm on Javascript</div>
                    </div>
                <div class="col-md-4">
                        <input type="text" class="form-control text-center font-weight-bold" value="jsdddddddddddddddddddddddddddddddddddddddddddddddddddddddddlkjflksdjakljfl"  placeholder="*" readonly>
                    </div>
                </div>
                    <div class="row mb-3">
                        <div class="col-md-8">
                            <input type="text" class="form-control font-weight-bold  expand-reason text-truncate" value="hreohfohsdo" readonly>
                            <div class="p-2 mb-3 rounded text-dark font-weight-bold border text-center bg-light" style="display: none" id="full-reason-div">Javascript first because jQuery ismmmmmmmmmmmmmmmm on Javascript</div>
                        </div>
                        <div class="col-md-4">
                            <input type="text" class="form-control text-center font-weight-bold" value="jsdlkjflksdjakljfl"  placeholder="*" readonly>
                        </div>
                    </div> -->
                    <!-- <div class="row mb-3">
                        <div class="col-md-8">
                            <input type="text" class="form-control font-weight-bold  expand-reason text-truncate" value="hreohfohsdo" readonly>
                            <div class="p-2 mb-3 rounded text-dark font-weight-bold border text-center bg-light" style="display: none" id="full-reason-div">Javascript first because jQuery ismmmmmmmmmmmmmmmm on Javascript</div>
                        </div>
                        <div class="col-md-4">
                            <input type="text" class="form-control text-center font-weight-bold" value="jsdlkjflksdjakljfl"  placeholder="*" readonly>
                        </div>
                    </div> -->
            </div>
       
        <div class="card-footer">
            <h5>Result: {{ dilemma.result }} </span> </h5>
        </div>
    </div>
</div>
{% endfor %}
<br> <br>
        

<!--TOGGLE CLASS-->
<!-- <div class="container">
    <div class="card w-75 mx-auto">
        <div class="card-header">
            <h5>Dilemma: Shoud I eat spinach</h5>
        </div> 
        <div class="card-body">
            <div class="row mb-3">
                <div class="col-md-8">
                    <input type="text" class="form-control font-weight-bold expand-reason text-truncate" value="hreodddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddhfohsdo" readonly>
                    <div class="p-2 mb-3 rounded text-dark font-weight-bold border text-center bg-light" style="display: none" id="full-reason-div">Javascript first because jQuery ismmmmmmmmmmmmmmmm on Javascript</div>
                </div>
                <div class="col-md-4">
                    <input type="text" class="form-control text-center font-weight-bold" value="jddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddsdlkjflksdjakljfl"  placeholder="*" readonly>
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-md-8">
                    <input type="text" class="form-control font-weight-bold  expand-reason text-truncate" value="hreohfohsdo" readonly>
                    <div class="p-2 mb-3 rounded text-dark font-weight-bold border text-center bg-light" style="display: none" id="full-reason-div">Javascript first because jQuery ismmmmmmmmmmmmmmmm on Javascript</div>
                </div>
            <div class="col-md-4">
                    <input type="text" class="form-control text-center font-weight-bold" value="jsdddddddddddddddddddddddddddddddddddddddddddddddddddddddddlkjflksdjakljfl"  placeholder="*" readonly>
                </div>
            </div>
                <div class="row mb-3">
                    <div class="col-md-8">
                        <input type="text" class="form-control font-weight-bold  expand-reason text-truncate" value="hreohfohsdo" readonly>
                        <div class="p-2 mb-3 rounded text-dark font-weight-bold border text-center bg-light" style="display: none" id="full-reason-div">Javascript first because jQuery ismmmmmmmmmmmmmmmm on Javascript</div>
                    </div>
                    <div class="col-md-4">
                        <input type="text" class="form-control text-center font-weight-bold" value="jsdlkjflksdjakljfl"  placeholder="*" readonly>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-8">
                        <input type="text" class="form-control font-weight-bold  expand-reason text-truncate" value="hreohfohsdo" readonly>
                        <div class="p-2 mb-3 rounded text-dark font-weight-bold border text-center bg-light" style="display: none" id="full-reason-div">Javascript first because jQuery ismmmmmmmmmmmmmmmm on Javascript</div>
                    </div>
                    <div class="col-md-4">
                        <input type="text" class="form-control text-center font-weight-bold" value="jsdlkjflksdjakljfl"  placeholder="*" readonly>
                    </div>
                </div>
        </div>
   
    <div class="card-footer">
        <h5>Result: Eat spinach </span> </h5>
    </div>
</div>
</div> -->



<!--Load more ajax/json dilemmas-->
<div class="container mb-3 mt-5 text-center" >
    <button id="get-more-dilemmas"  class="btn btn-primary">Load more Dilemmas</button>
</div>


  <!-- Modal for LOGIN and SIGNUP -->
  <div class="modal fade" id="login-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="login-modal-title">Login</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        
             <!-- form card login -->
            <form class="form needs-validation" role="form" autocomplete="off" id="login-form" method="" novalidate>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="login_username">Username</label>
                        <input type="text" class="form-control form-control-lg" name="login_username" id="login_username" required>
                        <div class="invalid-feedback">Please enter your username.</div>
                    </div>
                    <div class="form-group">
                        <label for="login_password">Password</label>
                        <input type="password" class="form-control form-control-lg" id="login_password" name="login_password" required>
                        <div class="invalid-feedback">Please enter your password too!</div>
                    </div>
                    <div>
                        <span class="custom-control-description small text-dark">Don't have an account? <a data-dismiss="modal" data-toggle="modal" href="#signup-modal">Sign Up</a></span>
                    </div>
                            
                    </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success" data-dismiss="modal" id="btnLogin">Login</button> <!-- Don't actually login user because no database to store credentials-->
                </div>
            </form>
      </div>
    </div>
  </div>
  <!--/end LOGIN modal-->
    <!-- Modal -->
    <div class="modal fade" id="signup-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="login-modal-title">Sign Up</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                <!-- form card login -->
                        <form class="form needs-validation" role="form" autocomplete="off" id="signup-form" method="" novalidate>
                            <div class="form-group">
                                <label for="sign_up_username">Username</label>
                                <input type="text" class="form-control form-control-lg" name="sign_up_username" id="sign_up_username" required>
                                <div class="invalid-feedback">Please enter a valid username.</div> <!-- This site is annunymous so no email required-->
                            </div>
                            <div class="form-group">
                                <label for="sign_up__password">Password</label>
                                <input type="password" class="form-control form-control-lg" id="sign_up__password" name="sign_up__password" required>
                                <div class="invalid-feedback">Please enter your password too!</div>
                            </div>
                            <div>
                                <!--When user clicks the link then it closes the signup modal and opens the login one-->
                                <span class="custom-control-description small text-dark">Have an account? <a data-dismiss="modal" data-toggle="modal" href="#login-modal">Login</a></span>
                            </div>
                        
                        </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                  <button type="button" class="btn btn-success" data-dismiss="modal" id="btnSignUp">Sign Up</button> <!-- Don't actually Sign Up user because no database to store credentials-->
                </div>
            </form>
              </div>
            </div>
          </div>
          <!--/end SIGNUP modal-->

    <!-- FOOTER -->
    <hr>
    <footer class="container pt-5">

        <div class="float-right"><a href="#" id="back-to-top"></a></div>

        <!-- <p class="float-right"><a href="#"></a></p> -->
        <p>&copy; 2019 Aaron Farntrog</p>
    </footer>

    
  <!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>


</body>
</html>